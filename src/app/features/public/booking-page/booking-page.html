<!-- src/app/features/public/booking-page/booking-page.html -->
<div class="booking-page">
  <!-- background like Prices -->
  <div class="bg"></div>

  <div class="container">
    <!-- Page heading -->
    <header class="page-head">
      <h1 class="title">
        <span class="title-main">Book</span>
        <span class="title-highlight">Appointment</span>
      </h1>
      <p class="subtitle">Fast. Clean. Precise.</p>
    </header>

    <!-- Stepper -->
    <ol class="stepper" role="tablist" aria-label="Booking steps">
      <li>
        <button type="button" role="tab"
                [class.active]="current()===1" [class.done]="current()>1"
                [attr.aria-selected]="current()===1"
                (click)="goTo(1)">
          1. Barber
        </button>
      </li>
      <li>
        <button type="button" role="tab"
                [class.active]="current()===2" [class.done]="current()>2"
                [attr.aria-selected]="current()===2"
                (click)="goTo(2)">
          2. Service
        </button>
      </li>
      <li>
        <button type="button" role="tab"
                [class.active]="current()===3" [class.done]="current()>3"
                [attr.aria-selected]="current()===3"
                (click)="goTo(3)">
          3. Time
        </button>
      </li>
      <li>
        <button type="button" role="tab"
                [class.active]="current()===4" [class.done]="current()>4"
                [attr.aria-selected]="current()===4"
                (click)="goTo(4)">
          4. Customer
        </button>
      </li>
      <li>
        <button type="button" role="tab"
                [class.active]="current()===5"
                [attr.aria-selected]="current()===5"
                (click)="goTo(5)">
          5. Review
        </button>
      </li>
    </ol>

    <!-- Step card (only one visible) -->
    <section class="card" aria-live="polite">
      @if (current() === 1) {
        <app-step-select-barber
          (selected)="barberId.set($event); serviceId.set(null); slot.set(null); next()">
        </app-step-select-barber>
      } @else if (current() === 2) {
        <app-step-select-service
          [barberId]="barberId()"
          (selected)="serviceId.set($event); slot.set(null); next()">
        </app-step-select-service>
      } @else if (current() === 3) {
        <app-step-pick-time
          [barberId]="barberId()"
          [serviceId]="serviceId()"
          (selected)="slot.set($event); next()">
        </app-step-pick-time>
      } @else if (current() === 4) {
        <app-step-customer-info
          (completed)="customer.set($event); next()">
        </app-step-customer-info>
      } @else {
        <app-step-review-confirm
          [summary]="summary"
          (confirm)="onConfirm()">
        </app-step-review-confirm>
      }
    </section>

    <!-- Nav -->
    <div class="nav">
      <button class="btn ghost" type="button" (click)="back()" [disabled]="current()===1">Back</button>
      <button class="btn" type="button" (click)="next()" [disabled]="current()===5 || !canNext()">Next</button>
    </div>
  </div>

  <!-- Toast -->
  @if (toastVisible()) {
    <div class="toast" role="status" aria-live="polite">{{ toastText() }}</div>
  }
</div>
